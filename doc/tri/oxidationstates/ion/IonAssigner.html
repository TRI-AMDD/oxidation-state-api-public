<!DOCTYPE HTML>
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (16) on Mon Oct 16 17:45:17 EDT 2023 -->
<title>IonAssigner</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="dc.created" content="2023-10-16">
<meta name="description" content="declaration: package: tri.oxidationstates.ion, class: IonAssigner">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.5.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar.top">
<div class="skip-nav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar.top.firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/IonAssigner.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search">SEARCH:</label>
<input type="text" id="search" value="search" disabled="disabled">
<input type="reset" id="reset" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip.navbar.top">
<!--   -->
</span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">tri.oxidationstates.ion</a></div>
<h1 title="Class IonAssigner" class="title">Class IonAssigner</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">tri.oxidationstates.ion.IonAssigner</div>
</div>
<section class="description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">IonAssigner</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">This class assigns ions to sites in a way that minimizes the global
 instability index</div>
<dl class="notes">
<dt>Author:</dt>
<dd>timmueller</dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor.summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><span class="member-name-link"><a href="#%3Cinit%3E(matsci.structure.Structure,tri.oxidationstates.calculator.OxidationStateSet)">IonAssigner</a></span>&#8203;(matsci.structure.Structure&nbsp;structure,
 <a href="../calculator/OxidationStateSet.html" title="class in tri.oxidationstates.calculator">OxidationStateSet</a>&nbsp;stateSet)</code></div>
<div class="col-last even-row-color">
<div class="block">Assign the given oxidation states to atom in the structure in a way that
 minimizes the GII.</div>
</div>
<div class="col-constructor-name odd-row-color"><code><span class="member-name-link"><a href="#%3Cinit%3E(tri.oxidationstates.ion.KnownIonFinder,tri.oxidationstates.calculator.OxidationStateSet)">IonAssigner</a></span>&#8203;(<a href="KnownIonFinder.html" title="class in tri.oxidationstates.ion">KnownIonFinder</a>&nbsp;ionFinder,
 <a href="../calculator/OxidationStateSet.html" title="class in tri.oxidationstates.calculator">OxidationStateSet</a>&nbsp;stateSet)</code></div>
<div class="col-last odd-row-color">
<div class="block">Given an ionFinder (which identifies polyatomic ions) and a set of oxidation
 states, assign the oxidation states to atoms in a way that minimizes the GII.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method.summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab1" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab1', 3)" class="table-tab">Static Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>int</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getActiveAtomIndex(java.lang.String)">getActiveAtomIndex</a></span>&#8203;(<a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;polyatomicSymbol)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">This method is used to simplify the process of assigning oxidation states in
 a way that minimizes the GII for polyatomic ions.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><a href="../calculator/BondValenceCalculator.html" title="class in tri.oxidationstates.calculator">BondValenceCalculator</a></code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getBondValenceCalculator()">getBondValenceCalculator</a></span>()</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Returns the bond valence calculator used to calculate bond valence sums.</div>
</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>matsci.structure.Structure</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getGivenStructure()">getGivenStructure</a></span>()</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Returns the structure provided in the constructor.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>double</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getGlobalInstabilityIndex()">getGlobalInstabilityIndex</a></span>()</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Returns the calculated global instability index for the assigned oxidation
 states.</div>
</div>
<div class="col-first even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>int[]</code></div>
<div class="col-second even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getMappedIndices(tri.structure.mapper.GeneralStructureMapper.Map)">getMappedIndices</a></span>&#8203;(tri.structure.mapper.GeneralStructureMapper.Map&nbsp;map)</code></div>
<div class="col-last even-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Returns an array of site indices correponding to the sites to which a
 polyatomic ion has been mapped in the given map.</div>
</div>
<div class="col-first odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code>matsci.structure.PartiallyOccupiedStructure</code></div>
<div class="col-second odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#getStructure()">getStructure</a></span>()</code></div>
<div class="col-last odd-row-color method-summary-table-tab2 method-summary-table-tab4 method-summary-table">
<div class="block">Return the structure with assigned oxidation states</div>
</div>
<div class="col-first even-row-color method-summary-table-tab1 method-summary-table-tab4 method-summary-table"><code>static double[]</code></div>
<div class="col-second even-row-color method-summary-table-tab1 method-summary-table-tab4 method-summary-table"><code><span class="member-name-link"><a href="#normalizeWeights(double%5B%5D,int)">normalizeWeights</a></span>&#8203;(double[]&nbsp;weights,
 int&nbsp;ionTypeCount)</code></div>
<div class="col-last even-row-color method-summary-table-tab1 method-summary-table-tab4 method-summary-table">
<div class="block">Normalizes the given weights to that the sum of all weights is equal to the
 given ionTypeCount.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods.inherited.from.class.java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor.detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(tri.oxidationstates.ion.KnownIonFinder,tri.oxidationstates.calculator.OxidationStateSet)">
<h3>IonAssigner</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">IonAssigner</span>&#8203;<span class="parameters">(<a href="KnownIonFinder.html" title="class in tri.oxidationstates.ion">KnownIonFinder</a>&nbsp;ionFinder,
 <a href="../calculator/OxidationStateSet.html" title="class in tri.oxidationstates.calculator">OxidationStateSet</a>&nbsp;stateSet)</span></div>
<div class="block">Given an ionFinder (which identifies polyatomic ions) and a set of oxidation
 states, assign the oxidation states to atoms in a way that minimizes the GII.
 The atomic oxidation states for the polyatomic ions are read from the
 polyatomic ion structure files read by <a href="IonFactory.html" title="class in tri.oxidationstates.ion"><code>IonFactory</code></a>. If multiple
 different assignments yield nearly identical global instability indices, this
 method will generate a partially-occupied structure with occupancies given by
 the averages of all of those assignments.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>ionFinder</code> - An ion finder that has identified polyatomic ions in the
                  structure to which ions should be assigned.</dd>
<dd><code>stateSet</code> - The oxidation states to be assigned to the structure.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="&lt;init&gt;(matsci.structure.Structure,tri.oxidationstates.calculator.OxidationStateSet)">
<h3>IonAssigner</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">IonAssigner</span>&#8203;<span class="parameters">(matsci.structure.Structure&nbsp;structure,
 <a href="../calculator/OxidationStateSet.html" title="class in tri.oxidationstates.calculator">OxidationStateSet</a>&nbsp;stateSet)</span></div>
<div class="block">Assign the given oxidation states to atom in the structure in a way that
 minimizes the GII. If multiple different assignments yield nearly identical
 global instability indices, this method will generate a partially-occupied
 structure with occupancies given by the averages of all of those assignments.
 
 This constructor does not attempt to identify polyatomic ions, so the
 provided oxidation states should be for single-atom ions only.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>structure</code> - The structure to which oxidation states should be assigned.</dd>
<dd><code>stateSet</code> - The oxidation states to be assigned to the structure. The
                  state set should not contain any polyatomic ion types when
                  using this construction.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method.detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="getMappedIndices(tri.structure.mapper.GeneralStructureMapper.Map)">
<h3>getMappedIndices</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name">getMappedIndices</span>&#8203;<span class="parameters">(tri.structure.mapper.GeneralStructureMapper.Map&nbsp;map)</span></div>
<div class="block">Returns an array of site indices correponding to the sites to which a
 polyatomic ion has been mapped in the given map. In other words, the site
 indices of the atoms in one of the polyatomic ions in the structure. The
 indices are returned in the same order as the sites in GeneralStructureMapper.Map.getMatchingHostSites().</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>map</code> - The map containing the locations of the atoms in the polyatomic
            ions.</dd>
<dt>Returns:</dt>
<dd>an array of site indices correponding to the sites to which a
         polyatomic ion has been mapped in the given map. In other words, the
         site indices of the atoms in one of the polyatomic ions in the
         structure. The indices are returned in the same order as the sites in
         GeneralStructureMapper.Map.getMatchingHostSites().</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getActiveAtomIndex(java.lang.String)">
<h3>getActiveAtomIndex</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">getActiveAtomIndex</span>&#8203;<span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/16/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>&nbsp;polyatomicSymbol)</span></div>
<div class="block">This method is used to simplify the process of assigning oxidation states in
 a way that minimizes the GII for polyatomic ions. In the polyatomic ions
 considered for the manuscript and web site, when the ion changes oxidation
 state only one atom in the ion alsoc hanges oxidation states. All of the
 other atoms in the polyatomic ions always have the same oxidation state,
 regardless of what the oxidation state of the polyatomic ion is. The atom
 that changes oxidation states is called the "active atom", and here we return
 the index of that atom in the reptresentative structure of the given
 polyatomic ion.
 
 Note that another approach will need to be used if we extend the set of
 polyatomic ions to include ions that don't have a single "active atom".</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>polyatomicSymbol</code> - The ion type symbol of the polyatomic ion for which
                         we are trying to find the active atom.</dd>
<dt>Returns:</dt>
<dd>The index of the active atom in the representative structure for the given ion.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getStructure()">
<h3>getStructure</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">matsci.structure.PartiallyOccupiedStructure</span>&nbsp;<span class="element-name">getStructure</span>()</div>
<div class="block">Return the structure with assigned oxidation states</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the structure with assigned oxidation states</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getGivenStructure()">
<h3>getGivenStructure</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">matsci.structure.Structure</span>&nbsp;<span class="element-name">getGivenStructure</span>()</div>
<div class="block">Returns the structure provided in the constructor. Oxidation states are not
 assigned directly to this structure. If you want a structure with assigned
 oxidation states, call the <a href="#getStructure()"><code>getStructure()</code></a> method.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the structure provided in the constructor. Oxidation states are not
 assigned directly to this structure. If you want a structure with assigned
 oxidation states, call the <a href="#getStructure()"><code>getStructure()</code></a> method.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getGlobalInstabilityIndex()">
<h3>getGlobalInstabilityIndex</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">double</span>&nbsp;<span class="element-name">getGlobalInstabilityIndex</span>()</div>
<div class="block">Returns the calculated global instability index for the assigned oxidation
 states.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the calculated global instability index for the assigned oxidation
         states.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="getBondValenceCalculator()">
<h3>getBondValenceCalculator</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../calculator/BondValenceCalculator.html" title="class in tri.oxidationstates.calculator">BondValenceCalculator</a></span>&nbsp;<span class="element-name">getBondValenceCalculator</span>()</div>
<div class="block">Returns the bond valence calculator used to calculate bond valence sums.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the bond valence calculator used to calculate bond valence sums.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="normalizeWeights(double[],int)">
<h3>normalizeWeights</h3>
<div class="member-signature"><span class="modifiers">public static</span>&nbsp;<span class="return-type">double[]</span>&nbsp;<span class="element-name">normalizeWeights</span>&#8203;<span class="parameters">(double[]&nbsp;weights,
 int&nbsp;ionTypeCount)</span></div>
<div class="block">Normalizes the given weights to that the sum of all weights is equal to the
 given ionTypeCount.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>weights</code> - Weights corresponding to the relative number of atoms in
                     the material with each oxidation state.</dd>
<dd><code>ionTypeCount</code> - The sum of the returned weights will be this value.
                     Typically this would be the total number of ions of this
                     type per unit cell, so the elements of the returned array
                     given the total number of atoms per unit cell with the
                     corresponding oxidation state.</dd>
<dt>Returns:</dt>
<dd>An array in which the weights are normalized so that they sum to the
         ionTypeCount.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
</div>
</div>
</body>
</html>
